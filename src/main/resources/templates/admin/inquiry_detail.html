<html layout:decorate="~{admin/ad_navbar}">
<head>
  <title>AD-INQUIRY-DETAIL</title>
  <meta name="_csrf" th:content="${_csrf.token}" />
  <meta name="_csrf_header" th:content="${_csrf.headerName}" />
</head>
<div layout:fragment="content" class="relative">
  <ul class="flex">
    <li>
      <a th:href="@{/admin/inquiry}" th:if="${inquiry.state == false}"
         class="cursor-pointer block text-center w-32 rounded-xl p-1 m-5 border">목록으로</a>
      <a th:href="@{/admin/inquiry/done}" th:if="${inquiry.state == true}"
         class="cursor-pointer block text-center w-32 rounded-xl p-1 m-5 border">목록으로</a>
    </li>
  </ul>
  <div class="w-3/4 h-96 mx-auto">
    <div class="text-2xl border-b py-2" th:text="|제목 : ${inquiry.subject}|"></div>
    <div class="text-lg border-b py-2" th:text="|내용 : ${inquiry.content}|"></div>
    <div class="text-lg border-b py-2 bg-blue-100 w-full h-80">아마도 사진 자리</div>

    <div class="text-2xl py-2">답변</div>
    <div th:each="answer : ${inquiry.answerList}">
      <div class="answer-content text-lg border-b py-2 flex justify-between">
        <div th:text="${answer.content}" class="answer-content"></div>
        <div class="text-center">
          <a th:href="@{|/answer/modify/${answer.id}|}"
             class="modify border rounded-lg p-1 hover:bg-gray-200" th:text="수정"></a>
          <a href="javascript:void(0);" th:data-uri="@{|/answer/delete/${answer.id}|}"
             class="delete border rounded-lg p-1 hover:bg-gray-200" th:text="삭제"></a>
        </div>
      </div>
    </div>
    <form th:action="@{|/answer/create/${inquiry.id}|}" th:object="${inquiryAnswerForm}" method="post" class="mt-5">
      <div th:replace="~{form_errors :: formErrorsFragment}"></div>
      <div class="flex border rounded-xl">
        <textarea th:field="*{content}" class="w-full px-3 rounded-tl-xl rounded-bl-xl resize-none" rows="5"></textarea>
        <input type="submit" value="등록" class="text-center text-xl w-32 h-32 rounded-tr-xl rounded-br-xl p-3 cursor-pointer" style="background:#E9B384;">
      </div>
    </form>
  </div>
</div>
<script layout:fragment="script" type='text/javascript'>
  const delete_elements = document.getElementsByClassName("delete");
  Array.from(delete_elements).forEach(function(element) {
      element.addEventListener('click', function() {
          if(confirm("정말로 삭제하시겠습니까?")) {
              location.href = this.dataset.uri;
          };
      });
  });

</script>
</html>